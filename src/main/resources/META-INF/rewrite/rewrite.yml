type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.recipe.querydsl.UpgradeToQueryDsl5
displayName: UpgrateToQueryDSL_5
description: ""
recipeList:
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.mysema.querydsl
      oldArtifactId: querydsl-jpa
      newGroupId: com.querydsl
      newArtifactId: querydsl-jpa
      newVersion: ${querydsl.version}
      overrideManagedVersion: true
  - org.openrewrite.maven.ChangeDependencyClassifier:
      groupId: com.querydsl
      artifactId: querydsl-jpa
      newClassifier: jakarta
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.mysema.querydsl
      oldArtifactId: querydsl-apt
      newGroupId: com.querydsl
      newArtifactId: querydsl-apt
      newVersion: ${querydsl.version}
      overrideManagedVersion: true
  - org.openrewrite.maven.ChangeDependencyClassifier:
      groupId: com.querydsl
      artifactId: querydsl-apt
      newClassifier: jakarta
  - org.openrewrite.maven.AddPluginDependency:
      pluginGroupId: com.mysema.maven
      pluginArtifactId: apt-maven-plugin
      groupId: com.querydsl
      artifactId: querydsl-apt
      version: ${querydsl.version}
  - org.openrewrite.xml.ChangeTagValue:
      elementName: //plugin[artifactId='apt-maven-plugin']/executions/execution/configuration/processor[text()='com.mysema.query.apt.jpa.JPAAnnotationProcessor']
      newValue: com.querydsl.apt.jpa.JPAAnnotationProcessor
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.mysema.query.jpa.JPAQueryBase from(..)
      newMethodName: selectFrom
      ignoreDefinition: true
      matchOverrides: true
#  - org.openrewrite.java.ChangeMethodName:
#      methodPattern: com.mysema.query.jpa.JPAQueryBase list(..)
#      newMethodName: fetch
#      ignoreDefinition: true
#      matchOverrides: true
  - org.openrewrite.recipe.querydsl.ChangeJPAQueryListToFetch
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: com.mysema.query.jpa.impl.JPAQuery
      newFullyQualifiedTypeName: com.querydsl.jpa.impl.JPAQueryFactory
      ignoreDefinition: true
